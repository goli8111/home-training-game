(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{12:function(e){e.exports=JSON.parse('{"PoseMinConfidenceForGameReady":"0.1","ReadyCountdown":"3","PlayCountdown":"40","StartSceneIndex":0,"TapelineCutlineForShift":15,"FrogMoveSpeed":1,"CatMoveSpeed":0.5}')},15:function(e){e.exports=JSON.parse('{"simultaneous-spawn":2,"interval-spawn":1,"MinPartConfidenceForTouch":"0.1","PoseMinConfidenceForGameReady":"0.1","ReadyCountdown":"3","PlayCountdown":"20"}')},16:function(e){e.exports=JSON.parse('{"PoseMinConfidenceForGameReady":"0.1","ReadyCountdown":"3","PlayCountdown":"100","StartSceneIndex":0,"GoalFloor":10,"SpawnPerSecond":3}')},23:function(e){e.exports=JSON.parse('[{"x":50,"y":15,"radius":8},{"x":20,"y":30,"radius":8},{"x":20,"y":60,"radius":8},{"x":20,"y":85,"radius":8},{"x":80,"y":30,"radius":8},{"x":80,"y":60,"radius":8},{"x":80,"y":85,"radius":8}]')},44:function(e){e.exports=JSON.parse('[{"img":"npc1","lifeTime":3000},{"img":"npc2","lifeTime":2000},{"img":"npc3","lifeTime":4000},{"img":"none","lifeTime":3000}]')},54:function(e,t,n){e.exports=n.p+"static/media/two.433c9bba.mp3"},64:function(e,t,n){e.exports=n(85)},69:function(e,t,n){},70:function(e,t,n){},81:function(e,t){},82:function(e,t){},83:function(e,t){},85:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(21),r=n.n(i),s=(n(69),n(70),n(3));function c(e){return{type:"SET_SCENE",_change_scene:e}}function l(e){return{type:"SETSUBSCENE",_changeSubScene:e}}var u=n(102),d=n(25),f=n(5),p=n.n(f),h=n(14),v=n(26),m=n(27),w=n(37),g=n(30),y=n(32),b=n(19),S=n(8);function E(e){var t={x:0,y:-1},n=O(t,e),o=parseInt(Math.acos(n)*(180/Math.PI));return e.x<0&&(o+=180),o}function _(e,t){var n=O(e,t);return parseInt(Math.acos(n)*(180/Math.PI))}function P(e,t,n){return Math.abs(t-e)<=n}function x(e){var t=Math.pow(e.x-0,2)+Math.pow(e.y-0,2);return Math.sqrt(t)}function O(e,t){return(e.x*t.x+e.y*t.y)/(x(e)*x(t))}var k,C;function T(e){return[e.x,e.y]}function I(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.forEach((function(e){if(e.score>=t){var i=e.position,r=i.x,s=i.y;o.beginPath(),o.arc(r*a,s*a,3,0,2*Math.PI),o.fillStyle=n,o.fill()}}))}function j(e,t,n,o,a,i){var r=Object(S.a)(e,2),s=r[0],c=r[1],l=Object(S.a)(t,2),u=l[0],d=l[1];i.beginPath(),function(e,t,n,o,a){a.moveTo(e,t),a.lineTo(n,o);var i=n-e,r=o-t,s=Math.atan2(r,i);a.moveTo(n,o),a.lineTo(n-10*Math.cos(s-Math.PI/6),o-10*Math.sin(s-Math.PI/6)),a.moveTo(n,o),a.lineTo(n-10*Math.cos(s+Math.PI/6),o-10*Math.sin(s+Math.PI/6))}(s*a,c*a,u*a,d*a,i),i.lineWidth=o,i.strokeStyle=n,i.stroke()}function B(e,t,n,o,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=b.a(e,t);r.forEach((function(e){j(T(e[0].position),T(e[1].position),n,o,i,a)}))}function D(e,t,n,o){var a=Object(S.a)(e,2),i=a[0],r=a[1],s=Object(S.a)(t,2),c=s[0],l=s[1];o.font="20px Arial",o.fillStyle=n,o.textAlign="center";var u={};u.x=c-i,u.y=l-r;var d=E(u),f=(i+c)/2,p=(r+l)/2;o.fillText("("+d+")",f,p)}function N(e,t,n,o,a){arguments.length>5&&void 0!==arguments[5]&&arguments[5];var i=b.a(e,t);i.forEach((function(e){D(T(e[0].position),T(e[1].position),n,o)}))}var M=0,R="yellow",A=32;function F(){if(!k)return k=Date.now(),C=0,void(M=0);(Date.now()-k)/1e3>=1?(k=Date.now(),C=M,M=0):M++}function V(e){e.fillStyle=R,e.font=A+"px Arial",e.fillText(C,10,A+10)}function G(e){return{type:"CLOSEPOSENET",_closePosenet:e}}var W=function(e){Object(y.a)(n,e);var t=Object(g.a)(n);function n(e){var o;return Object(v.a)(this,n),(o=t.call(this,e,n.defaultProps)).getCanvas=function(e){o.canvas=e},o.getCanvasOverlay=function(e){o.canvasOverlay=e},o.getVideo=function(e){o.video=e},o.resize=o.resize.bind(Object(w.a)(o)),o.stopCamera=o.stopCamera.bind(Object(w.a)(o)),o}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.resize(),e.prev=1,e.next=4,this.setupCamera();case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),new Error("This browser does not support video capture, or this device does not have a camera");case 9:return e.prev=9,e.next=12,b.b();case 12:this.posenet=e.sent,e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(9),new Error("PoseNetCamera failed to load");case 18:return e.prev=18,setTimeout((function(){t.setState({loading:!1})}),200),e.finish(18);case 21:this.detectPose(),window.addEventListener("resize",this.resize);case 23:case"end":return e.stop()}}),e,this,[[1,6],[9,15,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"resize",value:function(){console.log("resize start");var e=this.video;if(void 0!=e){var t=this.canvas;if(void 0!=t){var n=this.canvasOverlay;if(void 0!=n){var o=this.props.showMiniVideo,a=window.innerWidth,i=window.innerHeight;1==o&&(a/=3,i/=3),console.log("resize apply:"+a+","+i),e.style.position="fixed",1==o?(e.style.left=window.innerWidth-a+"px",e.style.top=window.innerHeight-i+"px"):(e.style.left="0px",e.style.top="0px"),e.setAttribute("width",a),e.setAttribute("height",i),1==o?(t.style.left=window.innerWidth-a+"px",t.style.top=window.innerHeight-i+"px"):(t.style.left="0px",t.style.top="0px"),t.width=a,t.height=i,n.width=window.innerWidth,n.height=window.innerHeight}}}}},{key:"setupCamera",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,o,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:return(t=this.video).style.display="none",t.style.transform="rotatey(180deg)",n=window.innerWidth,o=window.innerHeight,e.next=9,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:n,height:o}});case 9:return a=e.sent,t.srcObject=a,e.abrupt("return",new Promise((function(e){t.onloadedmetadata=function(){t.play(),e(t)}})));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopCamera",value:function(){console.log("stopCamera call");var e=this.video;void 0!=e&&(e.pause(),e.src="",void 0!=e.srcObject&&(e.srcObject.getTracks()[0].stop(),e.srcObject=void 0),this.props.onPosenetPose(void 0),console.log("video off"))}},{key:"detectPose",value:function(){var e=this.canvas;if(void 0!=e){var t=e.getContext("2d");if(void 0!=t){var n=this.props.showVideo,o=this.video;o.style.display=0==n?"none":"block",this.poseDetectionFrame(t)}}}},{key:"poseDetectionFrame",value:function(e){var t=this,n=this.props,o=n.algorithm,a=n.imageScaleFactor,i=n.flipHorizontal,r=n.outputStride,s=n.minPoseConfidence,c=n.minPartConfidence,l=n.maxPoseDetections,u=n.nmsRadius,d=n.showDebugVideo,f=n.showPoints,v=n.showSkeleton,m=n.showSkeletonDegree,w=n.skeletonColor,g=n.skeletonDegreeColor,y=n.skeletonLineWidth,b=this.posenet,S=this.video,E=function(){var n=Object(h.a)(p.a.mark((function n(){var h,_,P;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:h=[],n.t0=o,n.next="multi-pose"===n.t0?4:"single-pose"===n.t0?8:14;break;case 4:return n.next=6,b.estimateMultiplePoses(S,a,i,r,l,c,u);case 6:return h=n.sent,n.abrupt("break",14);case 8:return n.next=10,b.estimateSinglePose(S,a,i,r);case 10:return _=n.sent,t.props.onPosenetPose(_),h.push(_),n.abrupt("break",14);case 14:if(P=t.canvas,1==d&&void 0!=P&&(e.clearRect(0,0,P.width,P.height),F(),e.save(),e.scale(-1,1),e.translate(-P.width,0),e.drawImage(S,S.left,S.top,S.left+P.width/2,S.top+P.height),h.forEach((function(t){var n=t.score,o=t.keypoints;n>=s&&(f&&I(o,c,w,e),v&&B(o,c,w,y,e),m&&N(o,c,g,e))})),e.restore(),V(e)),"start"!=t.props._closePosenet){n.next=20;break}return t.stopCamera(),t.props.onClosePosenet("complete"),n.abrupt("return");case 20:requestAnimationFrame(E);case 21:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();E()}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("video",{id:"videoCamera",style:{zIndex:"-2"},src:"",playsInline:!0,ref:this.getVideo}),a.a.createElement("canvas",{style:{position:"fixed",left:"0%",top:"0%",zIndex:"-1"},ref:this.getCanvas}),a.a.createElement("canvas",{id:"canvasOverlay",style:{position:"fixed",left:"0%",top:"0%",zIndex:"-1"},ref:this.getCanvasOverlay}))}}]),n}(o.Component);W.defaultProps={flipHorizontal:!0,algorithm:"single-pose",showMiniVideo:!1,showVideo:!0,showDebugVideo:!1,showSkeleton:!0,showPoints:!0,showSkeletonDegree:!1,minPoseConfidence:.7,minPartConfidence:.5,maxPoseDetections:2,nmsRadius:20,outputStride:16,imageScaleFactor:.5,skeletonColor:"#ffadea",skeletonDegreeColor:"#ff0000",skeletonLineWidth:6,loadingText:"Loading...please be patient..."};var z=W=Object(s.b)((function(e){return{_current_scene:e.scene._current_scene,_closePosenet:e.posenet._closePosenet}}),(function(e){return{onPosenetPose:function(t){return e({type:"SETPOSENETPOSE",_posenetPose:t})},onClosePosenet:function(t){return e(G(t))}}}))(W),L=function(e){Object(y.a)(n,e);var t=Object(g.a)(n);function n(e){var o;return Object(v.a)(this,n),(o=t.call(this,e,n.defaultProps)).getCanvas=function(e){o.canvas=e},o.getImage=function(e){o.img=e},o}return Object(m.a)(n,[{key:"detectPose",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,o,a,i,r,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.showImage,n=this.img,o=n.width,a=n.height,0==t&&(n.style.display="none",n.width=o,n.height=a),e.prev=5,e.next=8,b.b();case 8:this.posenet=e.sent,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new Error("PoseNetImage failed to load");case 14:return e.prev=14,setTimeout((function(){s.setState({loading:!1})}),200),e.finish(14);case 17:i=this.canvas,r=i.getContext("2d"),i.width=n.width,i.height=n.height,this.poseDetectionFrame(n,r);case 22:case"end":return e.stop()}}),e,this,[[5,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"poseDetectionFrame",value:function(e,t){var n=this.props,o=n.algorithm,a=n.imageScaleFactor,i=n.flipHorizontal,r=n.outputStride,s=n.minPoseConfidence,c=n.minPartConfidence,l=n.maxPoseDetections,u=n.nmsRadius,d=n.showDebugImage,f=n.showPoints,v=n.showSkeleton,m=n.showSkeletonDegree,w=n.keypointColor,g=n.skeletonColor,y=n.skeletonDegreeColor,b=n.skeletonLineWidth,S=this.posenet;(function(){var n=Object(h.a)(p.a.mark((function n(){var h,E;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:h=[],n.t0=o,n.next="multi-pose"===n.t0?4:"single-pose"===n.t0?8:13;break;case 4:return n.next=6,S.estimateMultiplePoses(e,a,i,r,l,c,u);case 6:return h=n.sent,n.abrupt("break",13);case 8:return n.next=10,S.estimateSinglePose(e,a,i,r);case 10:return E=n.sent,h.push(E),n.abrupt("break",13);case 13:d&&(t.clearRect(0,0,e.width,e.height),t.save(),t.drawImage(e,0,0,e.width,e.height),t.restore(),h.forEach((function(e){var n=e.score,o=e.keypoints;n>=s&&(v&&B(o,c,g,b,t),m&&N(o,c,y,t),f&&I(o,c,w,t))})));case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}},{key:"onImgLoadComplete",value:function(){console.log("load complete"),this.detectPose()}},{key:"onSelectImage",value:function(e){console.log("onSelectImage complete");var t=new FileReader;t.onload=function(){document.getElementById("SelectImageOutput").src=t.result},t.readAsDataURL(e.target.files[0])}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("input",{type:"file",accept:"file_extension|audio/*|video/*|image/*|media_type",onChange:this.onSelectImage.bind(this)}),a.a.createElement("img",{style:{width:"100%",height:"100%"},id:"SelectImageOutput",onLoad:this.onImgLoadComplete.bind(this),width:"600",ref:this.getImage}),a.a.createElement("canvas",{ref:this.getCanvas}),a.a.createElement("canvas",{id:"canvasOverlay",style:{position:"absolute",left:"0%",right:"0%"}}))}}]),n}(o.Component);L.defaultProps={flipHorizontal:!0,algorithm:"single-pose",showDebugImage:!0,showImage:!1,showSkeleton:!0,showPoints:!0,showSkeletonDegree:!0,minPoseConfidence:.1,minPartConfidence:.5,maxPoseDetections:2,nmsRadius:20,outputStride:16,imageScaleFactor:.5,keypointColor:"#ff00ff",skeletonColor:"#ffadea",skeletonDegreeColor:"#ff0000",skeletonLineWidth:3,loadingText:"Loading...please be patient..."};var J=L;function H(e){return!(e.score<.7)}function Y(e,t,n,o){var a=X(e,t),i=X(e,n),r=X(e,o),s={};s.x=i.x-a.x,s.y=i.y-a.y;var c={};return c.x=i.x-r.x,c.y=i.y-r.y,_(s,c)}function X(e,t){var n=q(t);if(void 0!=n)return e.keypoints[n].position}function U(e,t,n){var o=q(n);if(void 0!=o&&!(e.keypoints[o].score<t))return e.keypoints[o].position}function q(e){switch(e){case"nose":return 0;case"leftEye":return 1;case"rightEye":return 2;case"leftEar":return 3;case"rightEar":return 4;case"leftShoulder":return 5;case"rightShoulder":return 6;case"leftElbow":return 7;case"rightElbow":return 8;case"leftWrist":return 9;case"rightWrist":return 10;case"leftHip":return 11;case"rightHip":return 12;case"leftKnee":return 13;case"rightKnee":return 14;case"leftAnkle":return 15;case"rightAnkle":return 16}}var K=!1,$=function(e){Object(y.a)(n,e);var t=Object(g.a)(n);function n(e){var o;return Object(v.a)(this,n),(o=t.call(this,e,n.defaultProps)).getCanvas=function(e){o.canvas=e},o.getVideo=function(e){o.video=e},o}return Object(m.a)(n,[{key:"detectPose",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,o,a,i,r,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.showVideo,n=this.video,o=n.videoWidth,a=n.videoHeight,n.width=o,n.height=a,0==t&&(n.style.display="none",n.width=o,n.height=a),e.prev=7,e.next=10,b.b();case 10:this.posenet=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(7),new Error("PoseNetVideo failed to load");case 16:return e.prev=16,setTimeout((function(){s.setState({loading:!1})}),200),e.finish(16);case 19:i=this.canvas,r=i.getContext("2d"),i.width=o,i.height=a,this.poseDetectionFrame(r);case 24:case"end":return e.stop()}}),e,this,[[7,13,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"poseDetectionFrame",value:function(e){var t=this.props,n=t.algorithm,o=t.imageScaleFactor,a=t.flipHorizontal,i=t.outputStride,r=t.minPoseConfidence,s=t.minPartConfidence,c=t.maxPoseDetections,l=t.nmsRadius,u=t.showDebugVideo,d=t.showPoints,f=t.showSkeleton,v=t.showSkeletonDegree,m=t.skeletonColor,w=t.skeletonDegreeColor,g=t.skeletonLineWidth,y=this.posenet,b=this.video,S=function(){var t=Object(h.a)(p.a.mark((function t(){var h,E;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(4==b.readyState){t.next=3;break}return console.log("video not loaded!"),t.abrupt("return");case 3:h=[],t.t0=n,t.next="multi-pose"===t.t0?7:"single-pose"===t.t0?11:16;break;case 7:return t.next=9,y.estimateMultiplePoses(b,o,a,i,c,s,l);case 9:return h=t.sent,t.abrupt("break",16);case 11:return t.next=13,y.estimateSinglePose(b,o,a,i);case 13:return E=t.sent,h.push(E),t.abrupt("break",16);case 16:e.clearRect(0,0,b.width,b.height),u&&(F(),e.save(),e.drawImage(b,0,0,b.width,b.height),V(e),e.restore(),h.forEach((function(t){var n=t.score,o=t.keypoints;n>=r&&(d&&I(o,s,m,e),f&&B(o,s,m,g,e),v&&N(o,s,w,e))}))),0==K&&requestAnimationFrame(S);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();S()}},{key:"onVideoLoadComplete",value:function(){console.log("load complete"),this.detectPose()}},{key:"onVideoClick",value:function(){var e=this.video;e.paused?e.play():e.pause()}},{key:"onSelectVideo",value:function(e){if(void 0!=e.target.files[0]){console.log("onSelectVideo complete"),K=!0;var t=new FileReader;t.onload=function(){document.getElementById("SelectVideoOutput").src=t.result,K=!1},t.readAsDataURL(e.target.files[0])}}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("input",{type:"file",accept:"file_extension|audio/*|video/*|image/*|media_type",onChange:this.onSelectVideo.bind(this)}),a.a.createElement("video",{id:"SelectVideoOutput",onLoadedData:this.onVideoLoadComplete.bind(this),loop:!0,autoPlay:!0,ref:this.getVideo},a.a.createElement("source",{type:"video/mp4"}),"Your browser does not support the video tag."),a.a.createElement("canvas",{onClick:this.onVideoClick.bind(this),ref:this.getCanvas}))}}]),n}(o.Component);$.defaultProps={flipHorizontal:!0,algorithm:"single-pose",showVideo:!1,showDebugVideo:!0,showSkeleton:!0,showPoints:!0,showSkeletonDegree:!0,minPoseConfidence:.1,minPartConfidence:.5,maxPoseDetections:2,nmsRadius:20,outputStride:16,imageScaleFactor:.5,skeletonColor:"#ffadea",skeletonDegreeColor:"#ff0000",skeletonLineWidth:6,loadingText:"Loading...please be patient..."};var Q=$;function Z(e){if(0==H(e))return!1;var t=X(e,"leftHip"),n=X(e,"leftKnee"),o=X(e,"leftAnkle"),a={};a.x=n.x-t.x,a.y=n.y-t.y;var i={};return i.x=n.x-o.x,i.y=n.y-o.y,1==P(180,_(a,i),20)}function ee(e){if(0==H(e))return!1;var t=X(e,"leftHip"),n=X(e,"leftKnee"),o=X(e,"leftAnkle"),a={};a.x=n.x-t.x,a.y=n.y-t.y;var i={};return i.x=n.x-o.x,i.y=n.y-o.y,1==P(90,_(a,i),20)}var te=n(53),ne=n.n(te),oe=n(54),ae=n.n(oe),ie=new ne.a({asset:ae.a}),re=Object(u.a)((function(e){return{root:{"& > *":{width:"100%"}}}})),se=0,ce=0,le={set_scene:c},ue=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose}}),le)((function(e){e._current_scene,e.set_scene;var t=e._posenetPose,n=re();return void 0!=t&&(0==se?1==Z(t)&&(ce,se=1,console.log("sound play1:"+se),ie.play()):1==se&&1==ee(t)&&(ce++,se=2,ie.play(),console.log("sound play2:"+se),setTimeout(function(){se=0}.bind(void 0),500))),a.a.createElement("div",{className:n.root},a.a.createElement("h1",null,"step : ",0==se?"step0":"step1",a.a.createElement("br",null),"count : ",ce))})),de=Object(u.a)((function(e){return{root:{"& > *":{width:"100%"}},video_root:{flexGrow:1,position:"absolute",height:"50%",width:"50%",frameBorder:0},camera_root:{position:"fixed",left:0,top:0}}})),fe=function(e){Object(d.a)(e),console.log("Index_scene component start");var t=de();return a.a.createElement("div",{className:t.root},a.a.createElement(ue,null),a.a.createElement("div",null,a.a.createElement(z,{className:t.camera_root})))},pe=Object(u.a)((function(e){return{root:{"& > *":{width:"100%"}}}})),he=function(e){Object(d.a)(e),console.log("Index_scene component start");var t=pe();return a.a.createElement("div",{className:t.root},a.a.createElement(J,null))},ve=Object(u.a)((function(e){return{root:{"& > *":{width:"100%"}}}})),me=function(e){Object(d.a)(e),console.log("PoseNetVideoScene component start");var t=ve();return a.a.createElement("div",{className:t.root},a.a.createElement(Q,null))},we=n(11);function ge(e,t,n){console.log("SecondCountdown start:"+e);var o=e,a=setInterval((function(){t(o),o<=0&&(n(),clearInterval(a)),--o}),1e3)}function ye(e){return{type:"SET_COUNTDOWN",_countdown:e}}var be=n(23),Se=n(15),Ee=n(44),_e=0,Pe={set_scene:c,SetDooDoongScore:function(e){return{type:"SET_DOODOONG_SCORE",_doodoongScore:e}}},xe=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_countdown:e.countdown._countdown,_doodoongScore:e.score._doodoongScore}}),Pe)((function(e){e._current_scene,e.set_scene;var t=e._doodoongScore,n=e.SetDooDoongScore,i=e._posenetPose,r=e._countdown;Object(o.useEffect)((function(){s(),f()}),[i]);var s=function(){l(),u();var e=document.getElementById("canvasOverlay");void 0!=e&&c(e)},c=function(e){var o=U(i,Se.MinPartConfidenceForTouch,"nose"),a=U(i,Se.MinPartConfidenceForTouch,"leftWrist"),r=U(i,Se.MinPartConfidenceForTouch,"rightWrist"),s=U(i,Se.MinPartConfidenceForTouch,"leftAnkle"),c=U(i,Se.MinPartConfidenceForTouch,"rightAnkle"),l=[];void 0!=o&&l.push(o),void 0!=a&&l.push(a),void 0!=r&&l.push(r),void 0!=s&&l.push(s),void 0!=c&&l.push(c),l.map((function(o){be.map((function(a,i){if(void 0!=a.npc){var r=.01*e.width,s=a.x*r,c=.01*a.y*e.height,l=a.radius*r,u=Math.abs(s-o.x),d=Math.abs(c-o.y);if(d>l||u>l)return;if(Math.sqrt(u*u+d*d)>l)return;var f=document.getElementById("hitSound");void 0!=f&&f.play(),console.log("touch slot : "+i),a.npc=void 0,n(t+1)}}))}))},l=function(){be.map((function(e,t){if(void 0!=e.npc){var n=Ee[e.npc.id].lifeTime;Date.now()-e.npc.spawnTime>=n&&(e.npc=void 0,console.log("despawn slot : "+t))}}))},u=function(){if(_e!=r){_e=r;var e=Math.floor(Math.random()*Math.floor(be.length));if(void 0==be[e].npc){var t=Math.floor(Math.random()*Math.floor(Ee.length));console.log("npc spawn slot index:"+e+", npc index:"+t);var n={};n.spawnTime=Date.now(),n.id=t,be[e].npc=n}else console.log("already npc spawn!")}},d=function(e,t){void 0!=e&&void 0!=t&&be.map((function(n,o){var a=.01*e.width,i=n.x*a,r=.01*n.y*e.height,s=n.radius*a;t.beginPath(),t.globalAlpha=.4,t.setLineDash([4,2]),t.lineDashOffset=Date.now()/200%18,t.arc(i,r,s,0,2*Math.PI),t.strokeStyle="red",t.lineWidth=2,t.stroke(),function(e,t,n,o,a,i,r){if(void 0!=i&&void 0!=r&&void 0!=a){var s=Ee[a.id],c=Date.now()-a.spawnTime,l=s.lifeTime,u=n*(1-(c=Math.min(c,l))/l);r.globalAlpha=1;var d=document.getElementById(s.img);void 0!=d?r.drawImage(d,e-u,t-u,2*u,2*u):(r.beginPath(),r.arc(e,t,u,0,2*Math.PI),r.fillStyle="red",r.fill())}}(i,r,s,0,n.npc,e,t)}))},f=function(){if(void 0!=i){var e=document.getElementById("canvasOverlay");if(void 0!=e){var n=e.getContext("2d");void 0!=n&&(n.clearRect(0,0,e.width,e.height),n.save(),n.scale(-1,1),n.translate(-e.width,0),d(e,n),n.restore(),function(e,t){if(void 0!=e&&void 0!=t){var n=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=n+"px Arial",t.textAlign="center",t.fillText(r+"\ucd08",e.width/2,n)}}(e,n),function(e,n){if(void 0!=e&&void 0!=n){var o=e.width/10;n.fillStyle="white",n.shadowColor="rgba(0,0,0,1)",n.shadowBlur=2,n.shadowOffsetX=3,n.shadowOffsetY=3,n.font=o+"px Arial",n.textAlign="center",n.fillText(t,e.width/2,e.height/2)}}(e,n),function(e,t){if(void 0!=e&&void 0!=t&&0==H(i)){var n=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=n+"px Arial",t.textAlign="center",t.fillText("\uc801\uc808\ud55c \uac70\ub9ac \uc720\uc9c0",e.width/2,e.height/2+n)}}(e,n))}}};return a.a.createElement("div",null,a.a.createElement("img",{id:"npc1",src:"npc1.jpg",style:{display:"none"}}),a.a.createElement("img",{id:"npc2",src:"npc2.jpg",style:{display:"none"}}),a.a.createElement("img",{id:"npc3",src:"npc3.jpg",style:{display:"none"}}),a.a.createElement("audio",{id:"hitSound",preload:"auto",src:"two.mp3",style:{display:"none"}}))})),Oe={set_scene:c},ke=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_countdown:e.countdown._countdown}}),Oe)((function(e){e.set_scene;var t=e._posenetPose;e._countdown;Object(o.useEffect)((function(){n()}));var n=function(){var e=document.getElementById("canvasOverlay");if(void 0!=e){var n=e.getContext("2d");void 0!=n&&(n.clearRect(0,0,e.width,e.height),n.save(),function(e,n){if(void 0!=e&&void 0!=n){var o=e.width/10;if(n.fillStyle="white",n.shadowColor="rgba(0,0,0,1)",n.shadowBlur=2,n.shadowOffsetX=3,n.shadowOffsetY=3,n.font=o+"px Arial",n.textAlign="center",void 0==t)n.fillText("\ub85c\ub529 \uc911",e.width/2,o);else{var a=parseInt(100*t.score);n.fillText("\uc778\uc2dd \uc911"+a,e.width/2,o)}}}(e,n),n.restore())}};return a.a.createElement("div",null)})),Ce={set_scene:c},Te=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_countdown:e.countdown._countdown}}),Ce)((function(e){e.set_scene;var t=e._posenetPose,n=e._countdown;Object(o.useEffect)((function(){i()}));var i=function(){if(void 0!=t){var e=document.getElementById("canvasOverlay");if(void 0!=e){var o=e.getContext("2d");void 0!=o&&(o.clearRect(0,0,e.width,e.height),o.save(),function(e,t){if(void 0!=e&&void 0!=t){var o=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=o+"px Arial",t.textAlign="center",t.fillText(n+"\ucd08",e.width/2,o)}}(e,o),o.restore())}}};return a.a.createElement("div",null)})),Ie=n(104),je=n(28),Be=n.n(je),De=n(29),Ne=n.n(De),Me=Object(u.a)((function(e){return{root:{width:"100%",maxHeight:"100%"},wrapper:Object(we.a)({display:"table",width:"auto",position:"relative"},"width","100%"),video:{width:"100%",border:"1px solid black"},countdown_renderer:{width:"100%",zIndex:"1"},playButton:{width:"50%",height:"50%",position:"absolute",left:"0%",right:"0%",top:"0%",bottom:"0%",margin:"auto",display:"none"},skipButton:{width:"50%",height:"50%",position:"absolute",left:"0%",right:"0%",top:"50%",bottom:"0%",margin:"auto",display:"none"},largeIcon:{fontSize:"5em"}}})),Re=0,Ae=1,Fe=2,Ve=3,Ge=4,We=5,ze=Re,Le={set_scene:c,SetCountDown:ye,ClosePosenet:G},Je=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_closePosenet:e.posenet._closePosenet}}),Le)((function(e){var t=e._posenetPose,n=e._closePosenet,o=(e.set_scene,e.SetCountDown),i=e.ClosePosenet,r=Me(),s=a.a.useState(Re),c=Object(S.a)(s,2),l=c[0],u=c[1];function d(e){var t=ze,n=e;switch(u(n),ze=e,console.log("change scene tpye:"+t+"=>"+n),n){case Fe:i(""),ge(Se.ReadyCountdown,f,w);break;case Ve:i(""),ge(Se.PlayCountdown,f,w);break;case Ge:i("start")}}var f=function(e){o(e)},p=function(){return a.a.createElement("div",{key:"HowToPlay",className:r.wrapper},a.a.createElement("video",{id:"video",className:r.video,onClick:y,loop:!0,autoPlay:!0},a.a.createElement("source",{type:"video/mp4"}),a.a.createElement("source",{src:"FingertipToToeJacks.mp4",type:"video/ogg",id:"SelectSoundOutput"}),"Your browser does not support the video tag."),a.a.createElement("div",{id:"playButton",className:r.playButton},a.a.createElement(Ie.a,{"aria-label":"play",onClick:b},a.a.createElement(Be.a,{className:r.largeIcon}))),a.a.createElement("div",{id:"skipButton",className:r.skipButton},a.a.createElement(Ie.a,{"aria-label":"skip",onClick:E},a.a.createElement(Ne.a,{className:r.largeIcon}))))},h=function(){return a.a.createElement("div",{key:"PoseNetCamera"},a.a.createElement(z,{showVideo:!0,showDebugVideo:!0,minPoseConfidence:"0.1"}),l==Ve?a.a.createElement(xe,null):void 0,l==Ae?a.a.createElement(ke,null):void 0,l==Fe?a.a.createElement(Te,null):void 0)},v=function(){void 0!=t&&t.score>=Se.PoseMinConfidenceForGameReady&&d(Fe)},m=function(){console.log("GameStop check:"+n),"complete"==n&&(d(We),i(""))},w=function(){console.log("countdown_complete:"+ze),ze==Fe?d(Ve):ze==Ve&&d(Ge)},g=function(){return a.a.createElement("div",{key:"GameResult"},"\uc131\uacf5")},y=function(){var e=document.getElementById("video"),t=document.getElementById("playButton"),n=document.getElementById("skipButton");e.paused?(e.play(),t.style.display="none",n.style.display="none"):(e.pause(),t.style.display="block",n.style.display="block")},b=function(){var e=document.getElementById("video"),t=document.getElementById("playButton"),n=document.getElementById("skipButton");e.play(),t.style.display="none",n.style.display="none"},E=function(){d(Ae)};return a.a.createElement("div",{className:r.root},function(){var e=[];switch(l){case Re:e.push(p());break;case Ae:v(),e.push(h());break;case Fe:case Ve:e.push(h());break;case Ge:m(),e.push(h());break;case We:e.push(g())}return e}())})),He=Object(u.a)((function(e){var t;return{wrapper:(t={display:"table",width:"auto",position:"relative"},Object(we.a)(t,"width","100%"),Object(we.a)(t,"zIndex","-3"),t),video:{width:"100%",border:"1px solid black",zIndex:"-3"}}})),Ye=0,Xe={SetSubScene:l},Ue=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose}}),Xe)((function(e){e._current_scene;var t=e.SetSubScene,n=e._posenetPose,i=He();Object(o.useEffect)((function(){r(),s()}),[n]);var r=function(){var e=document.getElementById("video");if(void 0!=e)switch(Ye){case 0:e.paused?1==ee(n)&&(Ye=1,console.log("PosenetFrogJumpTutorial step:"+Ye),e.play()):e.currentTime>=2.8&&e.pause();break;case 1:e.paused?1==Z(n)&&(Ye=2,console.log("PosenetFrogJumpTutorial step:"+Ye),e.play()):e.currentTime>=4&&e.pause();break;case 2:e.paused?1==ee(n)&&(Ye=3,console.log("PosenetFrogJumpTutorial step:"+Ye),e.play()):e.currentTime>=7&&e.pause();break;case 3:e.paused?1==Z(n)&&t("next"):e.currentTime>=10&&e.pause()}},s=function(){if(void 0!=n){var e=document.getElementById("canvasOverlay");if(void 0!=e){var t=e.getContext("2d");void 0!=t&&(t.clearRect(0,0,e.width,e.height),function(e,t){if(void 0!=e&&void 0!=t){var n=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=n+"px Arial",t.textAlign="center",t.fillText("\ub530\ub77c\ud574 \ubcf4\uc138\uc694",e.width/2,n)}}(e,t),function(e,t){if(void 0!=e&&void 0!=t&&0==H(n)){var o=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=o+"px Arial",t.textAlign="center",t.fillText("\uc801\uc808\ud55c \uac70\ub9ac \uc720\uc9c0",e.width/2,e.height/2+o)}}(e,t))}}};return a.a.createElement("div",{key:"HowToPlay",className:i.wrapper},a.a.createElement("video",{id:"video",className:i.video,loop:!0,autoPlay:!0},a.a.createElement("source",{type:"video/mp4"}),a.a.createElement("source",{src:"Squats.mp4",type:"video/ogg",id:"SelectSoundOutput"}),"Your browser does not support the video tag."))})),qe=n(12),Ke=1,$e=0,Qe=0,Ze=-10,et=!1,tt={set_scene:c,SetFrogJumpScore:function(e){return{type:"SET_FROGJUMP_SCORE",_frogJumpScore:e}},SetSubScene:l},nt=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_countdown:e.countdown._countdown,_frogJumpScore:e.score._frogJumpScore}}),tt)((function(e){e._current_scene,e.set_scene;var t=e.SetSubScene,n=e._frogJumpScore,i=e.SetFrogJumpScore,r=e._posenetPose,s=e._countdown;Object(o.useEffect)((function(){c(),l()}),[r]);var c=function(){var e=Date.now()-Qe;0==Qe&&(e=0),Qe=Date.now(),function(e){1!=et&&(Ze+=.005*e*qe.CatMoveSpeed)>$e&&(Ze=$e)}(e),function(e){if(1!=et){var t=10*n,o=.005*e*qe.FrogMoveSpeed;($e+=o)>=t&&($e=t)}}(e),1!=et&&Ze>=$e&&(et=!0,t("next"),console.log("game finished:"+Ze+"/"+$e)),void 0!=r&&1!=et&&(0==Ke?1==Z(r)&&(Ke=1,console.log("squart step 1"),i(n+1)):1==Ke&&1==ee(r)&&(Ke=0,console.log("squart step 2")))},l=function(){if(void 0!=r){var e=document.getElementById("canvasOverlay");if(void 0!=e){var t=e.getContext("2d");void 0!=t&&(t.clearRect(0,0,e.width,e.height),function(e,t){var n=e.width/40,o=e.width/10,a=e.width-o;t.fillStyle="#aaaaaa",t.fillRect(a,0,o,e.height);var i=parseInt(e.height/30)+2;t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.strokeStyle="#ffffff",t.fillStyle="#ffffff";var r=$e-qe.TapelineCutlineForShift;r<0&&(r=0);var s=parseInt(r),c=r-s;t.beginPath();for(var l=0;l<i;l++){var u=l+s,d=e.height-parseInt(30*(l-c));t.moveTo(a,d),t.lineTo(a+o/2,d),(u=u)%5==0&&(t.font=n+"px Arial",t.textAlign="center",t.fillText(u+"m",a+o/2,d+n))}t.stroke()}(e,t),function(e,t){var n=document.getElementById("cat");if(void 0!=n&&!(Ze<=0)){var o=e.width/20,a=e.width-o,i=e.height-30*Math.min($e,qe.TapelineCutlineForShift)+30*($e-Ze);t.drawImage(n,a-o-2*o,i-2*o,2*o,2*o)}}(e,t),function(e,t){var n=document.getElementById("frog");if(void 0!=n){var o=e.width/20,a=e.width-o,i=e.height-30*Math.min($e,qe.TapelineCutlineForShift),r=$e%10/10,s=parseInt(Math.sin(r*Math.PI)*o*5);t.drawImage(n,a-o-2*o-s,i-2*o,2*o,2*o)}}(e,t),function(e,t){if(void 0!=e&&void 0!=t&&1!=et){var n=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=n+"px Arial",t.textAlign="center",t.fillText(s+"\ucd08",e.width/2,n)}}(e,t),function(e,t){if(void 0!=e&&void 0!=t&&1!=et){var o=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=o+"px Arial",t.textAlign="center",t.fillText(n,e.width/2,e.height/2)}}(e,t),function(e,t){if(void 0!=e&&void 0!=t&&0!=et){var n=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=n+"px Arial",t.textAlign="center",t.fillText("\uac8c\uc784\uc885\ub8cc",e.width/2,e.height/2)}}(e,t),function(e,t){if(void 0!=e&&void 0!=t&&1!=et&&0==H(r)){var n=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=n+"px Arial",t.textAlign="center",t.fillText("\uc801\uc808\ud55c \uac70\ub9ac \uc720\uc9c0",e.width/2,e.height/2+n)}}(e,t))}}};return a.a.createElement("div",null,a.a.createElement("audio",{id:"hitSound",preload:"auto",src:"two.mp3"}),a.a.createElement("img",{id:"frog",src:"npc1.jpg",style:{display:"none"}}),a.a.createElement("img",{id:"cat",src:"cat.jpg",style:{display:"none"}}),a.a.createElement("button",{onClick:function(){1!=et&&i(n+1)}},"add count"))})),ot=Object(u.a)((function(e){return{root:{width:"100%",maxHeight:"100%"},wrapper:Object(we.a)({display:"table",width:"auto",position:"relative"},"width","100%"),video:{width:"100%",border:"1px solid black"},countdown_renderer:{width:"100%"},playButton:{width:"50%",height:"50%",position:"absolute",left:"0%",right:"0%",top:"0%",bottom:"0%",margin:"auto",display:"none"},skipButton:{width:"50%",height:"50%",position:"absolute",left:"0%",right:"0%",top:"50%",bottom:"0%",margin:"auto",display:"none"},largeIcon:{fontSize:"5em"}}})),at=0,it=1,rt=2,st=3,ct=4,lt=5,ut=6,dt=7,ft=8,pt=at,ht={SetSubScene:l,SetCountDown:ye,ClosePosenet:G},vt=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_closePosenet:e.posenet._closePosenet,_currentSubScene:e.scene._currentSubScene}}),ht)((function(e){var t=e._posenetPose,n=e._closePosenet,o=e._currentSubScene,i=e.SetSubScene,r=e.SetCountDown,s=e.ClosePosenet,c=ot(),l=a.a.useState(at),u=Object(S.a)(l,2),d=(u[0],u[1]);function f(e){var t=pt,n=e;switch(d(n),pt=e,console.log("change scene tpye:"+t+"=>"+n),n){case st:case dt:s("start");break;case lt:s(""),ge(qe.ReadyCountdown,p,P);break;case ut:s(""),ge(qe.PlayCountdown,p,P)}}var p=function(e){r(e)},h=function(){return a.a.createElement("div",{key:"HowToPlay",className:c.wrapper},a.a.createElement("video",{id:"video",className:c.video,onClick:O,loop:!0,autoPlay:!0},a.a.createElement("source",{type:"video/mp4"}),a.a.createElement("source",{src:"Squats.mp4",type:"video/ogg",id:"SelectSoundOutput"}),"Your browser does not support the video tag."),a.a.createElement("div",{id:"playButton",className:c.playButton},a.a.createElement(Ie.a,{"aria-label":"play",onClick:k},a.a.createElement(Be.a,{className:c.largeIcon}))),a.a.createElement("div",{id:"skipButton",className:c.skipButton},a.a.createElement(Ie.a,{"aria-label":"skip",onClick:C},a.a.createElement(Ne.a,{className:c.largeIcon}))))},v=function(){return a.a.createElement("div",{key:"PoseNetMiniCamera"},a.a.createElement(z,{showVideo:!0,showMiniVideo:!0,showDebugVideo:!0,minPoseConfidence:"0.1"}),pt==it?a.a.createElement(ke,null):void 0,pt==rt?a.a.createElement(Ue,null):void 0)},m=function(){return a.a.createElement("div",{key:"PoseNetCamera"},a.a.createElement(z,{showMiniVideo:!1,showVideo:!0,showDebugVideo:!0,minPoseConfidence:"0.1"}),pt==it||pt==ct?a.a.createElement(ke,null):void 0,pt==ut?a.a.createElement(nt,null):void 0,pt==lt?a.a.createElement(Te,null):void 0)},w=function(){void 0!=t&&t.score>=qe.PoseMinConfidenceForGameReady&&f(rt)},g=function(){void 0!=t&&"next"==o&&(i(""),f(st))},y=function(){void 0!=t&&"next"==o&&(i(""),f(dt))},b=function(){console.log("GameStop check:"+n),"complete"==n&&(f(ct),s(""))},E=function(){void 0!=t&&t.score>=qe.PoseMinConfidenceForGameReady&&f(lt)},_=function(){console.log("GameStop check:"+n),"complete"==n&&f(ft)},P=function(){console.log("countdown_complete:"+pt),pt==lt?f(ut):pt==ut&&f(dt)},x=function(){return a.a.createElement("div",{key:"GameResult"},"\uc131\uacf5")},O=function(){console.log("video click");var e=document.getElementById("video"),t=document.getElementById("playButton"),n=document.getElementById("skipButton");e.paused?(e.play(),t.style.display="none",n.style.display="none"):(e.pause(),t.style.display="block",n.style.display="block")},k=function(){var e=document.getElementById("video"),t=document.getElementById("playButton"),n=document.getElementById("skipButton");e.play(),t.style.display="none",n.style.display="none"},C=function(){f(it)};return a.a.createElement("div",{className:c.root},function(){var e=[];switch(pt){case at:e.push(h());break;case it:w(),e.push(v());break;case rt:g(),e.push(v());break;case st:b(),e.push(v());break;case ct:E(),e.push(m());break;case lt:e.push(m());break;case ut:y(),e.push(m());break;case dt:_(),e.push(m());break;case ft:e.push(x())}return e}())}));function mt(e){if(0==H(e))return!1;if(1==P(180,function(e,t,n){var o=X(e,t);return E(X(e,n)-o)}(e,"leftShoulder","leftElbow"),30))return!0;Y(e,"leftKnee","leftAnkle","leftElbow");return 1==P(60,30,30)}var wt=Object(u.a)((function(e){var t;return{wrapper:(t={display:"table",width:"auto",position:"relative"},Object(we.a)(t,"width","100%"),Object(we.a)(t,"zIndex","-3"),t),video:{width:"100%",border:"1px solid black",zIndex:"-3"}}})),gt={SetSubScene:l},yt=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose}}),gt)((function(e){e._current_scene,e.SetSubScene;var t=e._posenetPose,n=wt();Object(o.useEffect)((function(){i(),r()}),[t]);var i=function(){var e=document.getElementById("video");void 0!=e&&(e.paused?mt(t):e.currentTime>=2.8&&e.pause())},r=function(){if(void 0!=t){var e=document.getElementById("canvasOverlay");if(void 0!=e){var n=e.getContext("2d");void 0!=n&&(n.clearRect(0,0,e.width,e.height),function(e,t){if(void 0!=e&&void 0!=t){var n=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=n+"px Arial",t.textAlign="center",t.fillText("\ub530\ub77c\ud574 \ubcf4\uc138\uc694",e.width/2,n)}}(e,n),function(e,n){if(void 0!=e&&void 0!=n&&0==H(t)){var o=e.width/10;n.fillStyle="white",n.shadowColor="rgba(0,0,0,1)",n.shadowBlur=2,n.shadowOffsetX=3,n.shadowOffsetY=3,n.font=o+"px Arial",n.textAlign="center",n.fillText("\uc801\uc808\ud55c \uac70\ub9ac \uc720\uc9c0",e.width/2,e.height/2+o)}}(e,n))}}};return a.a.createElement("div",{key:"HowToPlay",className:n.wrapper},a.a.createElement("video",{id:"video",className:n.video,loop:!0,autoPlay:!0},a.a.createElement("source",{type:"video/mp4"}),a.a.createElement("source",{src:"KneePush.mp4",type:"video/ogg",id:"SelectSoundOutput"}),"Your browser does not support the video tag."))})),bt=n(16),St=0,Et=0,_t=!1,Pt={SetTowerScore:function(e){return{type:"SET_TOWER_SCORE",_towerScore:e}},SetSubScene:l},xt=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_countdown:e.countdown._countdown,_towerScore:e.score._towerScore}}),Pt)((function(e){var t=e._towerScore,n=e.SetTowerScore,i=e.SetSubScene,r=e._posenetPose,s=e._countdown;Object(o.useEffect)((function(){c(),d()}),[r]);var c=function(){u(),l()},l=function(){1!=_t&&void 0!=r&&(bt.GoalFloor<=t&&(_t=!0,i("next")),0==mt(r)&&(_t=!0))},u=function(){1!=_t&&St!=s&&(St=s,++Et%bt.SpawnPerSecond==0&&n(t+1))},d=function(){if(void 0!=r){var e=document.getElementById("canvasOverlay");if(void 0!=e){var n=e.getContext("2d");void 0!=n&&(n.clearRect(0,0,e.width,e.height),function(e,t){if(void 0!=e&&void 0!=t){var n=e.width/20;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=n+"px Arial",t.textAlign="center",t.fillText("\ubaa9\ud45c",e.width-4*n,n),t.fillText(bt.GoalFloor+"\uce35",e.width-3*n,2*n)}}(e,n),function(e,n){if(void 0!=e&&void 0!=n&&void 0!=r){var o=U(r,bt.MinPartConfidenceForTouch,"nose");if(void 0!=o){o.x=e.width-o.x;for(var a=e.width/40,i=0;i<t;i++){var s=document.getElementById("floor");void 0!=s&&(o.y-=2*a,n.drawImage(s,o.x-a,o.y-a,2*a,2*a))}var c=e.width/10;n.beginPath(),n.setLineDash([8,4]),n.lineWidth=4,n.strokeStyle="white",n.moveTo(0,o.y),n.lineTo(e.width,o.y),n.font=c+"px Arial",n.textAlign="center",n.fillText(t+"\uce35",2*c,o.y-c/2),n.stroke()}}}(e,n),function(e,t){if(void 0!=e&&void 0!=t&&0==H(r)){var n=e.width/10;t.fillStyle="white",t.shadowColor="rgba(0,0,0,1)",t.shadowBlur=2,t.shadowOffsetX=3,t.shadowOffsetY=3,t.font=n+"px Arial",t.textAlign="center",t.fillText("\uc801\uc808\ud55c \uac70\ub9ac \uc720\uc9c0",e.width/2,e.height/2+n)}}(e,n))}}};return a.a.createElement("div",null,a.a.createElement("img",{id:"floor",src:"floor.jpg",style:{display:"none"}}),a.a.createElement("audio",{id:"hitSound",preload:"auto",src:"two.mp3",style:{display:"none"}}))})),Ot=Object(u.a)((function(e){return{root:{width:"100%",maxHeight:"100%"},wrapper:Object(we.a)({display:"table",width:"auto",position:"relative"},"width","100%"),video:{width:"100%",border:"1px solid black"},countdown_renderer:{width:"100%"},playButton:{width:"50%",height:"50%",position:"absolute",left:"0%",right:"0%",top:"0%",bottom:"0%",margin:"auto",display:"none"},skipButton:{width:"50%",height:"50%",position:"absolute",left:"0%",right:"0%",top:"50%",bottom:"0%",margin:"auto",display:"none"},largeIcon:{fontSize:"5em"}}})),kt=0,Ct=1,Tt=2,It=3,jt=4,Bt=5,Dt=6,Nt=7,Mt=8,Rt=kt,At={SetSubScene:l,SetCountDown:ye,ClosePosenet:G},Ft=Object(s.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_closePosenet:e.posenet._closePosenet,_currentSubScene:e.scene._currentSubScene}}),At)((function(e){var t=e._posenetPose,n=e._closePosenet,o=e._currentSubScene,i=e.SetSubScene,r=e.SetCountDown,s=e.ClosePosenet,c=Ot(),l=a.a.useState(kt),u=Object(S.a)(l,2),d=(u[0],u[1]);function f(e){var t=Rt,n=e;switch(d(n),Rt=e,console.log("change scene tpye:"+t+"=>"+n),n){case It:case Nt:s("start");break;case Bt:s(""),ge(bt.ReadyCountdown,p,P);break;case Dt:s(""),ge(bt.PlayCountdown,p,P)}}var p=function(e){r(e)},h=function(){return a.a.createElement("div",{key:"HowToPlay",className:c.wrapper},a.a.createElement("video",{id:"video",className:c.video,onClick:O,loop:!0,autoPlay:!0},a.a.createElement("source",{type:"video/mp4"}),a.a.createElement("source",{src:"KneePush.mp4",type:"video/ogg",id:"SelectSoundOutput"}),"Your browser does not support the video tag."),a.a.createElement("div",{id:"playButton",className:c.playButton},a.a.createElement(Ie.a,{"aria-label":"play",onClick:k},a.a.createElement(Be.a,{className:c.largeIcon}))),a.a.createElement("div",{id:"skipButton",className:c.skipButton},a.a.createElement(Ie.a,{"aria-label":"skip",onClick:C},a.a.createElement(Ne.a,{className:c.largeIcon}))))},v=function(){return a.a.createElement("div",{key:"PoseNetMiniCamera"},a.a.createElement(z,{showVideo:!0,showMiniVideo:!0,showDebugVideo:!0,minPoseConfidence:"0.1"}),Rt==Ct?a.a.createElement(ke,null):void 0,Rt==Tt?a.a.createElement(yt,null):void 0)},m=function(){return a.a.createElement("div",{key:"PoseNetCamera"},a.a.createElement(z,{showMiniVideo:!1,showVideo:!0,showDebugVideo:!0,minPoseConfidence:"0.1"}),Rt==Ct||Rt==jt?a.a.createElement(ke,null):void 0,Rt==Dt?a.a.createElement(xt,null):void 0,Rt==Bt?a.a.createElement(Te,null):void 0)},w=function(){void 0!=t&&t.score>=bt.PoseMinConfidenceForGameReady&&f(Tt)},g=function(){void 0!=t&&"next"==o&&(i(""),f(It))},y=function(){void 0!=t&&"next"==o&&(i(""),f(Nt))},b=function(){console.log("GameStop check:"+n),"complete"==n&&(f(jt),s(""))},E=function(){void 0!=t&&t.score>=bt.PoseMinConfidenceForGameReady&&f(Bt)},_=function(){console.log("GameStop check:"+n),"complete"==n&&f(Mt)},P=function(){console.log("countdown_complete:"+Rt),Rt==Bt?f(Dt):Rt==Dt&&f(Nt)},x=function(){return a.a.createElement("div",{key:"GameResult"},"\uc131\uacf5")},O=function(){console.log("video click");var e=document.getElementById("video"),t=document.getElementById("playButton"),n=document.getElementById("skipButton");e.paused?(e.play(),t.style.display="none",n.style.display="none"):(e.pause(),t.style.display="block",n.style.display="block")},k=function(){var e=document.getElementById("video"),t=document.getElementById("playButton"),n=document.getElementById("skipButton");e.play(),t.style.display="none",n.style.display="none"},C=function(){f(Ct)};return a.a.createElement("div",{className:c.root},function(){var e=[];switch(Rt){case kt:e.push(h());break;case Ct:w(),e.push(v());break;case Tt:g(),e.push(v());break;case It:b(),e.push(v());break;case jt:E(),e.push(m());break;case Bt:e.push(m());break;case Dt:y(),e.push(m());break;case Nt:_(),e.push(m());break;case Mt:e.push(x())}return e}())})),Vt=n(105),Gt=n(106),Wt=n(55),zt=n.n(Wt),Lt=n(58),Jt=n.n(Lt),Ht=n(56),Yt=n.n(Ht),Xt=n(57),Ut=n.n(Xt),qt=n(47),Kt=n.n(qt),$t=n(59),Qt=n.n($t),Zt=Object(u.a)({root:{width:"100%",bottom:0,position:"fixed",flexGrow:1}}),en={set_scene:c},tn=Object(s.b)((function(e){return{_current_scene:e.scene._current_scene}}),en)((function(e){e._current_scene;var t=e.set_scene,n=Zt(),o=a.a.useState(0),i=Object(S.a)(o,2),r=i[0],s=i[1];return a.a.createElement(Vt.a,{value:r,onChange:function(e,n){t(n),s(n)},showLabels:!0,className:n.root},a.a.createElement(Gt.a,{value:"VideoPlay",label:"Video",icon:a.a.createElement(zt.a,null)}),a.a.createElement(Gt.a,{value:"PoseNetCamera",label:"PoseNetCamera",icon:a.a.createElement(Yt.a,null)}),a.a.createElement(Gt.a,{value:"PoseNetImage",label:"PoseNetImage",icon:a.a.createElement(Ut.a,null)}),a.a.createElement(Gt.a,{value:"PoseNetVideo",label:"PoseNetVideo",icon:a.a.createElement(Jt.a,null)}),a.a.createElement(Gt.a,{value:"DoodongGmae",label:"\ub450\ub465",icon:a.a.createElement(Kt.a,null)}),a.a.createElement(Gt.a,{value:"FrogJumpGmae",label:"\uac1c\uad6c\ub9ac\uc810\ud504",icon:a.a.createElement(Kt.a,null)}),a.a.createElement(Gt.a,{value:"TowerOfBabel",label:"\ubc14\ubca8\ud0d1",icon:a.a.createElement(Qt.a,null)}))})),nn=Object(u.a)((function(e){return{root:{"& > *":{width:"100%"}}}})),on={set_scene:c},an=Object(s.b)((function(e){return{_current_scene:e.scene._current_scene}}),on)((function(e){var t=e._current_scene;e.set_scene;console.log("Index_scene component start");var n=nn();return a.a.createElement("div",{className:n.root},function(){switch(t){case"VideoPlay":case"PoseNetCamera":return a.a.createElement(fe,null);case"PoseNetImage":return a.a.createElement(he,null);case"PoseNetVideo":return a.a.createElement(me,null);case"DoodongGmae":return a.a.createElement(Je,null);case"FrogJumpGmae":return a.a.createElement(vt,null);case"TowerOfBabel":return a.a.createElement(Ft,null);default:return a.a.createElement(tn,null)}}())}));var rn=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(an,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var sn=n(24),cn={_current_scene:"IndexScene",_currentSubScene:""};var ln={_posenetPose:void 0,_closePosenet:""};var un={_countdown:0};var dn={_doodoongScore:0,_frogJumpScore:0,_towerScore:0};var fn=Object(sn.b)({scene:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SCENE":return console.log("SET_SCENE:"+t._change_scene),Object.assign({},e,{_current_scene:t._change_scene});case"SETSUBSCENE":return console.log("SETSUBSCENE:"+t._changeSubScene),Object.assign({},e,{_currentSubScene:t._changeSubScene});default:return e}},posenet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETPOSENETPOSE":return Object.assign({},e,{_posenetPose:t._posenetPose});case"CLOSEPOSENET":return console.log("CLOSEPOSENET:"+t._closePosenet),Object.assign({},e,{_closePosenet:t._closePosenet});default:return e}},countdown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COUNTDOWN":return console.log("SET_COUNTDOWN:"+t._countdown),Object.assign({},e,{_countdown:t._countdown});default:return e}},score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DOODOONG_SCORE":return console.log("SET_DOODOONG_SCORE:"+t._doodoongScore),Object.assign({},e,{_doodoongScore:t._doodoongScore});case"SET_FROGJUMP_SCORE":return console.log("SET_FROGJUMP_SCORE:"+t._frogJumpScore),Object.assign({},e,{_frogJumpScore:t._frogJumpScore});case"SET_TOWER_SCORE":return console.log("SET_TOWER_SCORE:"+t._towerScore),Object.assign({},e,{_towerScore:t._towerScore});default:return e}}}),pn=document.getElementById("root"),hn=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),vn=Object(sn.c)(fn,hn);r.a.render(a.a.createElement(s.a,{store:vn},a.a.createElement(rn,null)),pn),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.1251370d.chunk.js.map